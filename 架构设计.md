# 架构设计

### 一、设计目标

* 插件化：模块可以独立开发，上线部署
* 组件化：独立的，可替换的，复用性高
* 解耦：无环形依赖
* 界面跳转与H5兼容，可配置
* 明确责权，明确分工，每个人更专业化（负责自己擅长的模块）



### 二、设计原则

* 简单
* 控制反转（IOC): 依赖注入（Dependency Injection）和依赖查找（Dependency Lookup）
* 单一职责
* 最少知道（迪米特原则）
* 依赖倒转 




### 三、分层设计

![img](https://github.com/linjinxing/iOSDocument/raw/master/Assets/uml/architecture/iOS_architecture_layer.png)

#### 	**注意点：**

* 采用MVC分层设计
* 通常情况下，只能从上一层调用到下一层，但有时候需要跨层向下调用，这种情况很少
* 绝对禁止下层调用上层api
* 绝对禁止同层之间的调用
* 任意层都可以调用通用层

### 四、模块设计

* #### 耦合方式

  - 每个模块一个工程
  - 组件或者模块间通过协议（接口）方式耦合
  - 使用者调用依赖注入管理
  - 界面跳转使用URL方式

* ​

  ​



### 五、工程结构设计

* 每个模块一个工程，即为一个插件
* 每个模块是一个lib包，可以加快编译速度，也方便后期权限管理
* 每个模块有自己的版本号，通过pod管理
* 所有资源，包括图片，本地化字符串，IB文件等全部打包Bundle
* 插件有生命周期，使用时，初始化，不使用时释放。
* 依赖以lib存在，不以源码，可以打包成framework



### 六、目录结构设计








